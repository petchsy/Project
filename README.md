# EE495 : Selected Topic in Electrical Engineering
## สรุปบทเรียนจากรายวิชา Drone (EE495)
   สรุปบทเรียนจากวิชา Drone รหัสวิชา EE495 อาจารผู้สอน  ผศ.ดร.รุจิพรรณ สัมปันณา 
และ รศ.ดร.ณัฐภพ นิ่มปิติวัน วิชานี้ผมได้เรียนรู้กระบวนการสร้างและพัฒนาตัวโดรนขึ้นมาเอง เริ่มจากเข้าใจโครงสร้างของโดรนว่าอะไรทำหน้าที่อะไรบ้าง ไม่ว่าจะเป็นตัวโครง ตัวควบคุม เซนเซอร์ หรือมอเตอร์ รู้พื้นฐานเกี่ยวกับวนต่าง ๆ ในตัวโดรนทำหน้าที่อะไรบ้าง ไม่ว่าจะเป็นโครงโดรน ตัวควบคุมการบิน เซนเซอร์ที่ใช้วัดการเคลื่อนไหว หรือมอเตอร์ที่ช่วยให้โดรนลอยและเคลื่อนที่ได้ ทุกอย่างมีความสำคัญและเชื่อมโยงกัน ซึ่งทำให้ผมเกิดความสนใจและอยากจะลองศึกษาและพัฒนาทำมันขึ้นมาเองตั้งแต่ต้นครับ

ช่วงแรกของวิชานี้จะเป็นการพูดคุย วิเคราะห์โครงสร้างและระบบควบคุม หาบร์อดควมคุมที่จะนำมาใช้ในโปรเจ็คว่าควรจะใช้บอร์ดแบบไหนดีที่ตอบสนอมความต้องการและมีความเสถียร ต่อมาผมได้ฝึกออกแบบแผงวงจรพิมพ์ (PCB) ด้วยตัวเอง โดยใช้โปรแกรม EasyEDA ออกแบบและสร้างไฟล์ เรียนรู้การวางตำแหน่งอุปกรณ์ต่าง ๆ และจัดการกับข้อจำกัดทางเทคนิคในการออกแบบวงจร และสร้างไฟล์ Gerber พร้อมส่งผลิต ต่อจากนั้นก็ได้ศึกษาและเปรียบเทียบบอร์ดควบคุม จากเดิมที่ใช้ Arduino Uno R3 ผมเปลี่ยนมาใช้ STM32F103C8 เพราะมันแรงกว่าและรองรับการควบคุมที่ซับซ้อนมากขึ้น ผมยังได้ศึกษารายละเอียดของ pinout diagram เพื่อเข้าใจว่าขาแต่ละขาของ STM32 ทำหน้าที่อะไร เช่น ขา PWM สำหรับควบคุมมอเตอร์ ขา ADC สำหรับอ่านค่าสัญญาณ และขา UART สำหรับสื่อสารกับอุปกรณ์ภายนอก ทำการทดลองเทสบร์อดว่ามีข้อผิดพลาดไหม โดยการอัพโปรแกรมใส่บอร์ดและทดสอบผ่าน LED ให้กะพริบ

หลังจากเข้าใจบอร์ดแล้ว ผมก็มาศึกษาเรื่องการเลือกเฟรมของโดรนให้เหมาะสมกับน้ำหนักและขนาดของชิ้นส่วนต่าง ๆ โดยดูว่ามอเตอร์ที่เลือกใช้สามารถรับน้ำหนักตัวโดรนได้หรือไม่ และเลือกใบพัดที่มีขนาดพอดีกับกำลังของมอเตอร์ นอกจากนี้ ผมยังได้เรียนรู้ว่าทำไมถึงต้องใช้มอเตอร์แบบ brushless ซึ่งให้แรงบิดสูง ทนทาน และเหมาะกับงานบิน ส่วนแบตเตอรี่ที่เลือกใช้ก็เป็นแบบ Li-Po 3 เชล เพราะให้พลังงานสูง น้ำหนักเบา และจ่ายไฟได้ต่อเนื่องเหมาะกับการใช้งานบนโดรน ESC เองก็สำคัญ เพราะมันทำหน้าที่ควบคุมความเร็วของมอเตอร์ โดยรับคำสั่งจาก STM32 ผ่านสัญญาณ PWM ได้ทำการสั่งซื้ออุปกรณ์สำเร็จก็ได้ทำการบัดกรีอุปกรณ์ประกอบแผงวงจร (PCB) เข้ากับตัวโดรน


ในช่วงท้าย ผมได้อัพโปรแกรมเพื่อควบคุมการบินของโดรนด้วย STM32 โดยใช้ภาษา C ผ่าน STM32F103C8 พร้อมอัปโหลดโค้ดผ่าน ST-Link ผมได้ลองแก้ไขโค้ด PID Controller เพื่อให้โดรนบินนิ่งขึ้น และสามารถควบคุมได้อย่างแม่นยำมากขึ้น ผ่านการปรับค่าและทดสอบหลายครั้ง แก้ปัญหาการเชื่อมต่อกับอุปกรณ์ต่างๆ อาจจะมีข้อผิดพลาดบ้างขนาดทดลองแต่ก็ถือว่าได้ทำและได้รับประสบการณ์ใหม่ๆเพื่อที่จะพัฒนาต่อ ตรงไหนพังก็ต้องซ่อมเอง ตรงไหนบินไม่ได้ก็ต้องนั่งไล่โค้ดกับสายเอง ได้ความรู้เต็มๆ ทั้งฮาร์ดแวร์และซอฟต์แวร์สุดท้ายแล้วก็ได้โดรนที่สามารถบินได้และมีความเสถียรในระดับนึงเลยครับ ขอบคุณอาจารย์ที่ให้คำแนะนำและประสบการณ์ในการทำโดรนครับ

## ตารางเปรียบเทียบคุณสมบัติระหว่าง Arduino Uno R3 และ STM32F103C8

| **คุณสมบัติ**              | **Arduino Uno R3**            | **STM32F103C8 (Blue Pill)**     |
|----------------------------|-------------------------------|----------------------------------|
| สถาปัตยกรรม               | 8-bit AVR (ATmega328P)        | 32-bit ARM Cortex-M3            |
| ความเร็วสัญญาณนาฬิกา     | 16 MHz                        | 72 MHz                           |
| หน่วยความจำแฟลช           | 32 KB                         | 64 KB                            |
| หน่วยความจำ SRAM          | 2 KB                          | 20 KB                            |
| ช่อง PWM                  | 6 ช่อง                        | สูงสุด 15 ช่อง                  |
| พอร์ตดิจิทัล              | 14 (6 ใช้เป็น PWM ได้)       | มากกว่า 30 พอร์ต I/O           |
| พอร์ตแอนะล็อก (ADC)       | 6 ช่อง 10-bit                 | 10 ช่อง 12-bit                  |
| โปรโตคอลที่รองรับ         | UART, SPI, I2C                | UART, SPI, I2C, CAN, USB, PWM   |
| การใช้งานกับ IDE          | Arduino IDE ใช้งานง่าย       | Arduino IDE / STM32CubeIDE ต้องใช้ ST-Link |
| แรงดันทำงาน               | 5V                            | 3.3V                             |
| ขนาดบอร์ด                 | ใหญ่กว่า                      | ขนาดเล็กกะทัดรัด               |
| ราคาโดยประมาณ             | 200 - 300 บาท                | 100 - 150 บาท                   |




![stm32 diagram](![STM32-pinout-diagram](https://github.com/user-attachments/assets/68ff0238-819c-4788-be99-aac0eea1708f)
)
